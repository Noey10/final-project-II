{% extends 'app_general/components/base.html' %}
{% block site_title %}Result | {% endblock %}
{% block content %}
<div class="container">
    <h5>ผลลัพธ์</h5>
    <div class="container h-auto w-75">
      <canvas id="donut_chart" class="w-25 h-auto"></canvas>
      <script>
        const ctx3 = document.getElementById("donut_chart").getContext("2d");
        const chart = new Chart(ctx3, {
          type: "doughnut",
          data: {
            labels: ['Fail', 'Pass'],
            datasets: [
              {
                backgroundColor: ['#FFBBDA', '#A8D1E7'],
                data: [{{ total_fail }}, {{ total_pass }}]
              }
            ],
            hoverOffset: 4
          },
          options: {
            title: {
              display: true
            }
          },
          responsive: true,
          maintainAspectRatio: true,
        });
      </script>
    </div>
    <div class="container mt-3">
      <p>ข้อมูลทั้งหมด : <strong>{{ total }}</strong> ข้อมูล</p>
      <p>ผลลัพธ์เป็น <strong>Pass</strong> : <strong>{{ per_pass }}%</strong></p>
      <p>ผลลัพธ์เป็น <strong>Fail</strong> : <strong>{{ per_fail }}%</strong></p>
    </div>
    <hr>
      <table class="table">     
        <thead>
            <tr>
            {% for col in df.columns %}
                <th scope="col">
                    {{col}}
                </th>
            {% endfor %}
            </tr>
        </thead>
        <tbody>
          {% for index, row in df.iterrows %}
            <tr>
              {% for cell in row %}
                <td>
                  {{cell}}
                </td>
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
</div>
{% endblock %}
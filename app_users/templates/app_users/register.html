{% extends 'app_users/components/base.html' %}
{% load static %}
{% block site_title %}สมัครสมาชิก{% endblock %}
{% block content %}
  <div class="container w-100 vh-100">
    <div class="container w-100 mt-3">
      <div class="row mt-3 mb-5">
        <div class="container w-75">
          {% for msg in messages %}
              {% if msg.tags == 'success' %}
                  <div class="alert alert-success alert-dismissible fade show" role="alert">
                      <strong>{{ msg }}</strong>
                      <a href="{% url 'login' %}">
                        <p>Go to login page</p>
                      </a>
                      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
              {% else %}
                  <div class="alert alert-danger alert-dismissible fade show" role="alert">
                      <strong>{{ msg }}</strong>
                      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
              {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="container w-75 h-80 shadow bg-light d-flex justify-content-center align-items-center" style="border-radius: 25px;">
      <div class="row h-100 w-100 m-3 p-3">
        <div class="col-md-6 col-lg-6 d-none d-md-block h-100">
          <img src="{% static 'app_general/img/averie.jpg' %}" alt="register form" class="img-fluid" style="border-radius: 1rem 0 0 1rem;" />
        </div>
        <div class="col-md-6 col-lg-6 d-flex align-items-center h-100">
          <form action="{% url 'register' %}" class="form" method="post">
            {% csrf_token %}
            <h2 class="mb-5">ลงทะเบียนเข้าใช้งานระบบ</h2>
            <div class="text-danger">
              {{ form.non_field_errors }}
            </div>
            <div class="form-outline mb-3">
              <input type="text" name="username" maxlength="150" autocapitalize="none" autocomplete="username" autofocus required id="id_username" class="form-control form-control-lg" />
              <label class="form-label" for="id_username">Username</label>
              <div class="text-danger">
                {{ form.username.errors }}
              </div>
            </div>
            <div class="form-outline mb-3">
              <input type="email" name="email" maxlength="254" required id="id_email" class="form-control form-control-lg" />
              <label class="form-label" for="id_email">Email</label>
              <div class="text-danger">
                {{ form.email.errors }}
              </div>
            </div>
            <div class="form-outline mb-3">
              <input type="password" name="password1" autocomplete="new-password" required id="id_password1" class="form-control form-control-lg" />
              <label class="form-label" for="id_password1">Password</label>
              <div class="text-danger">
                {{ form.password1.errors }}
              </div>
            </div>
            <div class="form-outline mb-3">
              <input type="password" name="password2" autocomplete="new-password" required id="id_password2" class="form-control form-control-lg" />
              <label class="form-label" for="id_password2">Repeat your password</label>
              <div class="text-danger">
                {{ form.password2.errors }}
              </div>
            </div>
            <div class="d-flex justify-content-center">
              <button type="submit" class="btn btn-primary btn-block btn-lg gradient-custom-4 text-body">Register</button>
            </div>
            <p class="text-center text-muted mt-5 mb-0">Have already an account? 
              <a href="{% url 'login' %}" class="fw-bold text-body"><u>Login here</u></a>
            </p>
          </form>
        </div>
      </div> 

    </div>
  </div>
{% endblock %}
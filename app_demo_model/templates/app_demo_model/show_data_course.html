{% extends 'app_general/components/base.html' %}
{% load static %}
{% block site_title %}Show model | {% endblock %}
{% block content %}
  <div class="container">
    <button onclick="topFunction()" id="myBtn" title="Go to top">
      <i data-feather="arrow-up"></i>
    </button>
       
    <div class="container mt-3">
      <div class"row mb-3 ">
        <h3>ข้อมูลที่ใช้สำหรับสร้างโมเดลการทำนาย</h3>
      </div>
      <div class="row">
        <div class="col-12 col-lg-6">
          <h5>total = {{ total }}</h5>
        </div>
        <div class="col-12 col-lg-6">
          <form action="{% url 'show_data_course' %}" method="post" class="form">
            {% csrf_token %}
            <div class="row">
              <div class="col-12 col-lg-10">
                  <select name="major" id="multiple-select-field" class="form-select" required>
                    <option selected disabled>เลือกสาขาที่คุณต้องการค้นหา</option>
                    <option value="DSSI">วิทยาการคอมพิวเตอร์/วิทยาการข้อมูลและนวัตกรรมซอฟต์แวร์</option>
                    <option value="ICT">เทคโนโลยีสารสนเทศ/เทคโนโลยีสารสนเทศและการสื่อสาร</option>
                    <option value="bio">ชีววิทยา</option>
                    <option value="chemi">เคมี</option>
                  </select>
              </div>
              <div class="col-12 col-lg-2">
                <button type="submit" class="btn btn-outline-primary shadow">
                  ค้นหา
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
      <hr class="mb-5">
      {% if search %}
        <div class="row mb-2">
          <div class="col-auto">
            <p>คุณกำลังค้นหาข้อมูลโมเดล <strong>{{ search }}</strong></p> 
          </div>
          <div class="col-2">
            <a href="{% url 'show_data_course' %}" class="text-danger">
              <i data-feather="x"></i>
            </a>
          </div>
        </div>
        {% if total > 1 %}
        <div class="row">
          <p class="text-primary"><strong> PASS = {{ pass_status }}; FAIL = {{ fail_status }}; </strong></p>
        </div>
          <table class="table">
            <thead class="bg-light">
              <th scope="col">สาขา</th>
              <th scope="col">เกรดเฉลี่ยรับเข้า</th>
              <th scope="col">เกรดเฉลี่ยชั้นปีที่1</th>
              <th scope="col">ภาษาไทย</th>
              <th scope="col">คณิตศาสตร์</th>
              <th scope="col">วิทยาศาสตร์</th>
              <th scope="col">สังคมศึกษา</th>
              <th scope="col">สุขศึกษา</th>
              <th scope="col">ศิลปะ</th>
              <th scope="col">การงานอาชีพ</th>
              <th scope="col">ภาษาต่างประเทศ</th>
              <th scope="col">สถานะ</th>              
            </thead>
            <tbody>
              <tr {% for data in dssi %}>
                <td>{{ data.major }}</td>
                <td>{{ data.admission_grade }}</td>
                <td>{{ data.gpa_year_1 }}</td>
                <td>{{ data.thai }}</td>
                <td>{{ data.math }}</td>
                <td>{{ data.sci }}</td>
                <td>{{ data.society }}</td>
                <td>{{ data.hygiene }}</td>
                <td>{{ data.art }}</td>
                <td>{{ data.career }}</td>
                <td>{{ data.langues }}</td>
                <td>{{ data.status }}</td>
              </tr {% endfor %}>
              <tr {% for data in ict %}>
                <td>{{ data.major }}</td>
                <td>{{ data.admission_grade }}</td>
                <td>{{ data.gpa_year_1 }}</td>
                <td>{{ data.thai }}</td>
                <td>{{ data.math }}</td>
                <td>{{ data.sci }}</td>
                <td>{{ data.society }}</td>
                <td>{{ data.hygiene }}</td>
                <td>{{ data.art }}</td>
                <td>{{ data.career }}</td>
                <td>{{ data.langues }}</td>
                <td>{{ data.status }}</td>
              </tr {% endfor %}>
              <tr {% for data in bio %}>
                <td>{{ data.major }}</td>
                <td>{{ data.admission_grade }}</td>
                <td>{{ data.gpa_year_1 }}</td>
                <td>{{ data.thai }}</td>
                <td>{{ data.math }}</td>
                <td>{{ data.sci }}</td>
                <td>{{ data.society }}</td>
                <td>{{ data.hygiene }}</td>
                <td>{{ data.art }}</td>
                <td>{{ data.career }}</td>
                <td>{{ data.langues }}</td>
                <td>{{ data.status }}</td>
              </tr {% endfor %}>
              <tr {% for data in chemi %}>
                  <td>{{ data.major }}</td>
                  <td>{{ data.admission_grade }}</td>
                  <td>{{ data.gpa_year_1 }}</td>
                  <td>{{ data.thai }}</td>
                  <td>{{ data.math }}</td>
                  <td>{{ data.sci }}</td>
                  <td>{{ data.society }}</td>
                  <td>{{ data.hygiene }}</td>
                  <td>{{ data.art }}</td>
                  <td>{{ data.career }}</td>
                  <td>{{ data.langues }}</td>
                  <td>{{ data.status }}</td>
                </tr {% endfor %}>
            </tbody>
          </table>
        {% else %}
          <div class="container w-50 d-flex align-items-center" style="height: 360px">
            <div class="card bg-light shadow w-100 text-center p-5" style="height: 180px;">
              <h4>ไม่มีข้อมูลที่คุณค้นหา</h4>
              <div class="row mt-3">
                <div class="col-6 d-flex justify-content-end">
                  <a href="{% url 'show_data_course' %}">
                    <button class="btn btn-primary shadow" title="เพิ่มข้อมูล">
                      <span><i data-feather="chevron-left"></i></span>
                      <span>กลับ</span>
                    </button>
                  </a>
                </div>
                <div class="col-6 d-flex justify-content-start">
                  <a href="{% url 'test_upload' %}">
                    <button class="btn btn-primary shadow" title="เพิ่มข้อมูล">
                      <span><i data-feather="plus"></i></span>
                      <span>เพิ่มข้อมูล</span>
                    </button>
                  </a>
                </div>
              </div>
            </div>
          </div>
        {% endif %}
      {% else %}
        {% if total < 1 %}
          <div class="container w-50 d-flex align-items-center" style="height: 360px">
            <div class="card bg-light shadow w-100 text-center p-5" style="height: 180px;">
              <h4>ขณะนี้ยังไม่มีการนำเข้าข้อมูลเพื่อสร้างโมเดล</h4>
                <a href="{% url 'test_upload' %}" class="mt-3">
                    <span><i data-feather="chevrons-left"></i></span>
                    <span>ไปยังหน้าอัปโหลดข้อมูลสร้างโมเดล</span>
                </a>
            </div>
          </div>
        {% else %}
          <table class="table">
            <thead class="bg-light">
              <th scope="col">สาขา</th>
              <th scope="col">เกรดเฉลี่ยรับเข้า</th>
              <th scope="col">เกรดเฉลี่ยชั้นปีที่1</th>
              <th scope="col">ภาษาไทย</th>
              <th scope="col">คณิตศาสตร์</th>
              <th scope="col">วิทยาศาสตร์</th>
              <th scope="col">สังคมศึกษา</th>
              <th scope="col">สุขศึกษา</th>
              <th scope="col">ศิลปะ</th>
              <th scope="col">การงานอาชีพ</th>
              <th scope="col">ภาษาต่างประเทศ</th>
              <th scope="col">สถานะ</th>              
            </thead>
            <tbody>
              <tr {% for data in dssi %}>
                <td>{{ data.major }}</td>
                <td>{{ data.admission_grade }}</td>
                <td>{{ data.gpa_year_1 }}</td>
                <td>{{ data.thai }}</td>
                <td>{{ data.math }}</td>
                <td>{{ data.sci }}</td>
                <td>{{ data.society }}</td>
                <td>{{ data.hygiene }}</td>
                <td>{{ data.art }}</td>
                <td>{{ data.career }}</td>
                <td>{{ data.langues }}</td>
                <td>{{ data.status }}</td>
              </tr {% endfor %}>
              <tr {% for data in ict %}>
                <td>{{ data.major }}</td>
                <td>{{ data.admission_grade }}</td>
                <td>{{ data.gpa_year_1 }}</td>
                <td>{{ data.thai }}</td>
                <td>{{ data.math }}</td>
                <td>{{ data.sci }}</td>
                <td>{{ data.society }}</td>
                <td>{{ data.hygiene }}</td>
                <td>{{ data.art }}</td>
                <td>{{ data.career }}</td>
                <td>{{ data.langues }}</td>
                <td>{{ data.status }}</td>
              </tr {% endfor %}>
              <tr {% for data in bio %}>
                <td>{{ data.major }}</td>
                <td>{{ data.admission_grade }}</td>
                <td>{{ data.gpa_year_1 }}</td>
                <td>{{ data.thai }}</td>
                <td>{{ data.math }}</td>
                <td>{{ data.sci }}</td>
                <td>{{ data.society }}</td>
                <td>{{ data.hygiene }}</td>
                <td>{{ data.art }}</td>
                <td>{{ data.career }}</td>
                <td>{{ data.langues }}</td>
                <td>{{ data.status }}</td>
              </tr {% endfor %}>
              <tr {% for data in chemi %}>
                  <td>{{ data.major }}</td>
                  <td>{{ data.admission_grade }}</td>
                  <td>{{ data.gpa_year_1 }}</td>
                  <td>{{ data.thai }}</td>
                  <td>{{ data.math }}</td>
                  <td>{{ data.sci }}</td>
                  <td>{{ data.society }}</td>
                  <td>{{ data.hygiene }}</td>
                  <td>{{ data.art }}</td>
                  <td>{{ data.career }}</td>
                  <td>{{ data.langues }}</td>
                  <td>{{ data.status }}</td>
                </tr {% endfor %}>
            </tbody>
          </table>
        {% endif %}
      {% endif %}
    </div>

  </div>
  <script>
    // Get the button
    let mybutton = document.getElementById("myBtn");   
    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function() {scrollFunction()};    
      function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
          mybutton.style.display = "block";
        } else {
          mybutton.style.display = "none";
        }
      }  
      // When the user clicks on the button, scroll to the top of the document
      function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
      }
  </script>
{% endblock %}